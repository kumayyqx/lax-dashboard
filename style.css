@import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;900&family=Barlow:wght@400;500&display=swap');

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --panel: #1a1a1a;
  --panel2: #232323;
  --panel3: #2c2c2c;
  --accent: #e8c84a;
  --accent2: #d4b035;
  --text: #f0f0f0;
  --dim: #666;
  --dim2: #999;
  --rec: #e74c3c;
  --green: #2ecc71;
  --sidebar-w: 190px;
  --header-h: 46px;
  --radius: 4px;
  --font-cond: 'Barlow Condensed', sans-serif;
  --font: 'Barlow', sans-serif;
}

html, body {
  height: 100%;
  overflow: hidden;
  background: #0d0d0d;
  color: var(--text);
  font-family: var(--font);
}

/* ── HEADER ── */
header {
  height: var(--header-h);
  background: var(--panel);
  border-bottom: 2px solid var(--accent);
  display: flex;
  align-items: center;
  padding: 0 12px;
  gap: 8px;
  flex-shrink: 0;
  position: relative;
  z-index: 20;
}

.logo {
  font-family: var(--font-cond);
  font-weight: 900;
  font-size: 1.15rem;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--accent);
  white-space: nowrap;
  user-select: none;
}
.logo-text { display: inline; }

.header-left { display: flex; align-items: center; flex-shrink: 0; }
.header-center { display: flex; align-items: center; gap: 6px; flex: 1; flex-wrap: wrap; overflow: hidden; }
.header-right { display: flex; align-items: center; margin-left: auto; gap: 6px; }

.hsep { width: 1px; height: 20px; background: #333; flex-shrink: 0; }

/* ── BUTTONS ── */
.btn, .tgrp button {
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 0.78rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  padding: 4px 10px;
  border: 1.5px solid var(--accent);
  background: transparent;
  color: var(--accent);
  cursor: pointer;
  border-radius: var(--radius);
  transition: background 0.12s, color 0.12s, border-color 0.12s;
  white-space: nowrap;
  line-height: 1.4;
}
.btn:hover, .btn.on { background: var(--accent); color: #111; }
.btn.red { border-color: var(--rec); color: var(--rec); }
.btn.red:hover, .btn.red.on { background: var(--rec); color: #fff; border-color: var(--rec); }
.btn.danger { border-color: #c0392b; color: #c0392b; }
.btn.danger:hover { background: #c0392b; color: #fff; }
.btn.icon-btn { padding: 4px 8px; font-size: 1rem; border-color: #444; color: var(--dim2); }
.btn.icon-btn:hover { border-color: var(--accent); color: var(--accent); background: transparent; }

/* toggle group */
.tgrp {
  display: flex;
  border: 1.5px solid var(--accent);
  border-radius: var(--radius);
  overflow: hidden;
  flex-shrink: 0;
}
.tgrp button {
  border: none;
  border-radius: 0;
  padding: 4px 11px;
}
.tgrp button.active { background: var(--accent); color: #111; }
.tgrp button + button { border-left: 1.5px solid var(--accent); }

/* ── BADGES ── */
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.1} }
.rdot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--rec);
  display: inline-block; margin-right: 3px;
  animation: blink 1s infinite;
}

.recbadge, .pathbadge {
  position: fixed;
  top: calc(var(--header-h) + 10px);
  right: 12px;
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 0.78rem;
  letter-spacing: 1px;
  padding: 4px 12px;
  border-radius: var(--radius);
  z-index: 30;
  display: none;
  align-items: center;
  gap: 4px;
}
.recbadge {
  background: rgba(231,76,60,.12);
  border: 1.5px solid var(--rec);
  color: var(--rec);
  right: 12px;
}
.recbadge.show { display: flex; }
.pathbadge {
  background: rgba(46,204,113,.1);
  border: 1.5px solid var(--green);
  color: var(--green);
  right: 12px;
  top: calc(var(--header-h) + 42px);
  font-size: 0.7rem;
}
.pathbadge.show { display: flex; }

/* ── MAIN LAYOUT ── */
.main {
  display: flex;
  height: calc(100vh - var(--header-h));
  overflow: hidden;
}

/* ── SIDEBAR ── */
.sidebar {
  width: var(--sidebar-w);
  background: var(--panel);
  border-right: 1px solid #222;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow-y: auto;
  padding: 8px;
  gap: 6px;
  transition: transform 0.22s cubic-bezier(.4,0,.2,1);
  z-index: 10;
}
.sidebar.hidden {
  transform: translateX(calc(-1 * var(--sidebar-w)));
  position: absolute;
  height: 100%;
}

/* Sidebar sections */
.ss {
  background: var(--panel2);
  border-radius: var(--radius);
  padding: 9px 10px;
  border: 1px solid #2a2a2a;
}
.sl {
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 0.65rem;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--dim);
  margin-bottom: 7px;
}
.color-label {
  font-family: var(--font-cond);
  font-weight: 600;
  font-size: 0.6rem;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--dim2);
  margin-bottom: 4px;
}

/* Teams */
.team-row { display: flex; align-items: center; gap: 6px; margin-bottom: 5px; }
.team-dot { width: 13px; height: 13px; border-radius: 50%; flex-shrink: 0; border: 1.5px solid rgba(255,255,255,.2); }
.team-name {
  background: var(--panel3);
  border: 1px solid #3a3a3a;
  color: var(--text);
  font-size: 0.78rem;
  padding: 4px 7px;
  border-radius: var(--radius);
  width: 100%;
  font-family: var(--font);
  outline: none;
  transition: border-color .12s;
}
.team-name:focus { border-color: var(--accent); }

.team-sel {
  display: flex;
  border: 1.5px solid #3a3a3a;
  border-radius: var(--radius);
  overflow: hidden;
}
.team-sel button {
  flex: 1;
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 0.75rem;
  letter-spacing: 1px;
  padding: 5px 0;
  border: none;
  background: transparent;
  color: var(--dim2);
  cursor: pointer;
  transition: background .12s, color .12s;
}
.team-sel button.on { background: var(--panel3); color: var(--text); }
.team-sel button + button { border-left: 1.5px solid #3a3a3a; }

/* Color grid */
.cgrid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 4px;
  margin-bottom: 7px;
}
.sw {
  width: 100%; aspect-ratio: 1;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid transparent;
  transition: transform .12s, border-color .12s;
}
.sw:hover { transform: scale(1.15); }
.sw.sel { border-color: #fff; transform: scale(1.1); box-shadow: 0 0 6px rgba(255,255,255,.3); }

/* Tool buttons */
.tb {
  width: 100%; text-align: left;
  font-family: var(--font-cond);
  font-weight: 600;
  font-size: 0.85rem;
  padding: 6px 9px;
  border: 1px solid #333;
  background: transparent;
  color: var(--text);
  cursor: pointer;
  border-radius: var(--radius);
  margin-bottom: 3px;
  transition: border-color .12s, color .12s, background .12s;
  display: flex; align-items: center; gap: 7px;
}
.tb:last-child { margin-bottom: 0; }
.tb:hover { border-color: var(--accent); color: var(--accent); }
.tb.on { background: var(--accent); border-color: var(--accent); color: #111; font-weight: 700; }

/* Add row */
.add-row { display: flex; gap: 5px; margin-bottom: 5px; }
input.ni {
  background: var(--panel3);
  border: 1px solid #3a3a3a;
  color: var(--text);
  font-size: 0.8rem;
  padding: 4px 7px;
  border-radius: var(--radius);
  width: 38px;
  font-family: var(--font);
  outline: none;
  text-align: center;
  transition: border-color .12s;
}
input.ni:focus { border-color: var(--accent); }

/* Player list */
.plist { max-height: 170px; overflow-y: auto; }
.pi {
  display: flex; align-items: center; gap: 5px;
  padding: 4px 6px;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 0.78rem;
  transition: background .1s;
}
.pi:hover { background: var(--panel3); }
.pi.sel { background: var(--panel3); outline: 1px solid var(--accent); }
.pd { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.plbl { flex: 1; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Shortcuts */
.shortcuts { opacity: 0.7; }
.shortcut-grid {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 3px 8px;
  font-size: 0.72rem;
  color: var(--dim2);
  align-items: center;
}
.key {
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 0.62rem;
  background: var(--panel3);
  border: 1px solid #444;
  border-radius: 3px;
  padding: 1px 4px;
  color: var(--accent);
  letter-spacing: 0.5px;
  white-space: nowrap;
  text-align: center;
}

/* ── CANVAS AREA ── */
.cwrap {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #0a0a0a;
  overflow: hidden;
  position: relative;
  padding: 10px;
}
canvas {
  border-radius: 5px;
  box-shadow: 0 0 60px rgba(0,0,0,.9), 0 0 0 1px rgba(255,255,255,.05);
  cursor: crosshair;
  touch-action: none;
  display: block;
}

/* Tip bar */
.tip {
  position: absolute;
  bottom: 12px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,.72);
  color: var(--dim2);
  font-size: 0.7rem;
  padding: 4px 14px;
  border-radius: 20px;
  white-space: nowrap;
  pointer-events: none;
  font-family: var(--font-cond);
  letter-spacing: 0.5px;
  border: 1px solid rgba(255,255,255,.06);
}

/* ── SCROLLBAR ── */
::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #3a3a3a; border-radius: 2px; }

/* ── MOBILE / RESPONSIVE ── */
@media (max-width: 720px) {
  :root { --sidebar-w: 170px; --header-h: 44px; }
  .logo-text { display: none; }
  .shortcuts { display: none; }
  .header-center .hsep:last-of-type { display: none; }

  .sidebar {
    position: fixed;
    top: var(--header-h);
    left: 0;
    height: calc(100vh - var(--header-h));
    z-index: 50;
    box-shadow: 4px 0 20px rgba(0,0,0,.6);
  }
  .sidebar:not(.hidden) ~ .cwrap { /* dim overlay handled by JS */ }

  .cwrap { padding: 6px; }
}

@media (max-width: 480px) {
  :root { --header-h: 42px; }
  .btn { padding: 3px 7px; font-size: 0.72rem; }
  .tgrp button { padding: 3px 8px; }
}

/* Overlay for mobile sidebar */
.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  top: var(--header-h);
  background: rgba(0,0,0,.55);
  z-index: 40;
}
.sidebar-overlay.show { display: block; }
